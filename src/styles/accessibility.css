/* src/styles/accessibility.css */

/* Screen Reader Only - Visually hidden but accessible to screen readers */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Skip Links */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #000;
  color: #fff;
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 9999;
  font-weight: bold;
  font-size: 14px;
  transition: top 0.2s ease;
}

.skip-link:focus {
  top: 6px;
  outline: 2px solid #ffff00;
  outline-offset: 2px;
}

/* High Contrast Mode */
:root.high-contrast {
  --primary-color: #000000;
  --secondary-color: #ffffff;
  --text-color: #000000;
  --background-color: #ffffff;
  --border-color: #000000;
  --link-color: #0000ff;
  --visited-link-color: #800080;
  --focus-color: #ffff00;
  --error-color: #ff0000;
  --success-color: #008000;
  --warning-color: #ff8c00;
}

.high-contrast * {
  color: var(--text-color) !important;
  background-color: var(--background-color) !important;
  border-color: var(--border-color) !important;
}

.high-contrast a {
  color: var(--link-color) !important;
  text-decoration: underline !important;
}

.high-contrast a:visited {
  color: var(--visited-link-color) !important;
}

.high-contrast button,
.high-contrast input,
.high-contrast select,
.high-contrast textarea {
  background-color: var(--background-color) !important;
  color: var(--text-color) !important;
  border: 2px solid var(--border-color) !important;
}

.high-contrast button:hover,
.high-contrast button:focus,
.high-contrast input:focus,
.high-contrast select:focus,
.high-contrast textarea:focus {
  background-color: var(--text-color) !important;
  color: var(--background-color) !important;
  outline: 3px solid var(--focus-color) !important;
  outline-offset: 2px !important;
}

/* Font Size Variations */
:root.font-small {
  font-size: 14px;
}

:root.font-medium {
  font-size: 16px;
}

:root.font-large {
  font-size: 18px;
}

:root.font-extra-large {
  font-size: 20px;
}

/* Reduced Motion */
.reduced-motion *,
.reduced-motion *::before,
.reduced-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* Focus Management */
.no-focus-outlines *:focus {
  outline: none !important;
  box-shadow: none !important;
}

/* Enhanced Focus Outlines */
:root:not(.no-focus-outlines) *:focus {
  outline: 3px solid #005fcc !important;
  outline-offset: 2px !important;
}

:root:not(.no-focus-outlines).high-contrast *:focus {
  outline: 3px solid var(--focus-color) !important;
  outline-offset: 2px !important;
}

/* Large Click Targets */
.large-click-targets button,
.large-click-targets a,
.large-click-targets input,
.large-click-targets select,
.large-click-targets [role="button"],
.large-click-targets [tabindex="0"] {
  min-width: 44px !important;
  min-height: 44px !important;
  padding: 12px !important;
}

.large-click-targets input[type="checkbox"],
.large-click-targets input[type="radio"] {
  width: 20px !important;
  height: 20px !important;
  min-width: 20px !important;
  min-height: 20px !important;
}

/* Simplified UI */
.simplified-ui * {
  border-radius: 4px !important;
  box-shadow: none !important;
  background-image: none !important;
  text-shadow: none !important;
}

.simplified-ui .gradient,
.simplified-ui .shadow,
.simplified-ui .fancy-border {
  background: var(--background-color, #ffffff) !important;
  border: 1px solid var(--border-color, #000000) !important;
  box-shadow: none !important;
}

/* Reduced Distraction */
.reduced-distraction .notification,
.reduced-distraction .toast,
.reduced-distraction .popup,
.reduced-distraction .banner {
  display: none !important;
}

.reduced-distraction .blinking,
.reduced-distraction .pulsing,
.reduced-distraction .auto-scrolling {
  animation: none !important;
}

.reduced-distraction .sidebar-ads,
.reduced-distraction .promotional-content,
.reduced-distraction .social-widgets {
  display: none !important;
}

/* Keyboard Navigation Enhancements */
.keyboard-navigation .dropdown:focus-within .dropdown-menu,
.keyboard-navigation .menu:focus-within .submenu {
  display: block !important;
  visibility: visible !important;
}

.keyboard-navigation [tabindex="-1"]:focus {
  outline: 3px solid #005fcc !important;
  outline-offset: 2px !important;
}

/* Screen Reader Improvements */
.screen-reader-improvements [aria-hidden="true"] {
  display: none !important;
}

.screen-reader-improvements img:not([alt]) {
  outline: 2px solid red !important;
}

.screen-reader-improvements img[alt=""] {
  display: none;
}

/* Color Blindness Support */
.color-blind-friendly .error {
  background-color: #d73527 !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: 8px center !important;
  background-size: 16px !important;
  padding-left: 32px !important;
}

.color-blind-friendly .success {
  background-color: #28a745 !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: 8px center !important;
  background-size: 16px !important;
  padding-left: 32px !important;
}

.color-blind-friendly .warning {
  background-color: #ffc107 !important;
  color: #000 !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='black' d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: 8px center !important;
  background-size: 16px !important;
  padding-left: 32px !important;
}

/* Print Styles for Accessibility */
@media print {
  .skip-link,
  .accessibility-button,
  .navigation,
  .sidebar {
    display: none !important;
  }
  
  .sr-only {
    position: static !important;
    width: auto !important;
    height: auto !important;
    margin: 0 !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: normal !important;
  }
  
  a[href^="http"]:after {
    content: " (" attr(href) ")";
  }
  
  .high-contrast * {
    background: white !important;
    color: black !important;
  }
}

/* Responsive Accessibility */
@media (max-width: 768px) {
  .large-click-targets button,
  .large-click-targets a,
  .large-click-targets input,
  .large-click-targets select,
  .large-click-targets [role="button"],
  .large-click-targets [tabindex="0"] {
    min-width: 48px !important;
    min-height: 48px !important;
    padding: 16px !important;
  }
  
  :root.font-large {
    font-size: 20px;
  }
  
  :root.font-extra-large {
    font-size: 22px;
  }
}

/* Browser-specific Accessibility Enhancements */

/* Firefox */
@-moz-document url-prefix() {
  .high-contrast input[type="checkbox"],
  .high-contrast input[type="radio"] {
    appearance: none;
    width: 16px;
    height: 16px;
    border: 2px solid var(--border-color);
    background: var(--background-color);
  }
  
  .high-contrast input[type="checkbox"]:checked::before {
    content: "✓";
    display: block;
    text-align: center;
    color: var(--text-color);
  }
  
  .high-contrast input[type="radio"]:checked::before {
    content: "•";
    display: block;
    text-align: center;
    color: var(--text-color);
  }
}

/* Safari */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  .high-contrast select {
    background-image: none;
    appearance: none;
    background: var(--background-color);
    border: 2px solid var(--border-color);
  }
  
  .high-contrast select:after {
    content: "▼";
    position: absolute;
    right: 8px;
    color: var(--text-color);
  }
}

/* Windows High Contrast Mode Detection */
@media (prefers-contrast: high) {
  :root {
    --primary-color: ButtonText;
    --background-color: ButtonFace;
    --text-color: ButtonText;
    --border-color: ButtonText;
    --link-color: LinkText;
    --visited-link-color: VisitedText;
  }
}

/* Prefers Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}