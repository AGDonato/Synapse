/**
 * Conflict Resolution Panel Styles
 * Estilos para interface de resolução de conflitos
 */

.conflictResolutionPanel {
  background: var(--surface-elevated);
  border: 1px solid var(--border-subtle);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
}

/* Header do painel */
.panelHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-lg);
  border-bottom: 1px solid var(--border-subtle);
  background: var(--surface);
}

.title {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: var(--font-size-lg);
  font-weight: 600;
  color: var(--text-primary);
}

.count {
  background: var(--color-error);
  color: var(--color-error-contrast);
  padding: 2px var(--spacing-xs);
  border-radius: var(--border-radius-full);
  font-size: var(--font-size-xs);
  font-weight: 700;
  min-width: 20px;
  text-align: center;
}

.historyToggle {
  padding: var(--spacing-xs) var(--spacing-sm);
  border: 1px solid var(--border-default);
  border-radius: var(--border-radius-md);
  background: var(--surface);
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all 0.2s ease;
}

.historyToggle:hover {
  background: var(--surface-subtle);
  color: var(--text-primary);
}

/* Lista de conflitos */
.conflictsList {
  max-height: 600px;
  overflow-y: auto;
  padding: var(--spacing-md);
}

/* Card de conflito */
.conflictCard {
  border: 1px solid var(--border-default);
  border-radius: var(--border-radius-lg);
  background: var(--surface);
  margin-bottom: var(--spacing-md);
  overflow: hidden;
  transition: all 0.2s ease;
}

.conflictCard:hover {
  border-color: var(--border-hover);
  box-shadow: var(--shadow-md);
}

.conflictCard.critical {
  border-left: 4px solid var(--color-error);
}

.conflictCard.high {
  border-left: 4px solid var(--color-warning);
}

.conflictCard.medium {
  border-left: 4px solid var(--color-info);
}

.conflictCard.low {
  border-left: 4px solid var(--color-success);
}

/* Header do conflito */
.conflictHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md);
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.conflictHeader:hover {
  background: var(--surface-subtle);
}

.conflictInfo {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
  flex: 1;
}

.conflictIcon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: var(--color-warning-subtle);
  color: var(--color-warning);
  border-radius: 50%;
  flex-shrink: 0;
}

.conflictDetails {
  flex: 1;
  min-width: 0;
}

.conflictTitle {
  font-size: var(--font-size-md);
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.conflictMeta {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
}

.entityInfo {
  padding: 2px var(--spacing-xs);
  background: var(--surface-subtle);
  border-radius: var(--border-radius-sm);
}

.usersIndicator {
  display: flex;
  align-items: center;
  gap: 4px;
}

.conflictStatus {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

/* Badge de prioridade */
.priorityBadge {
  padding: 2px var(--spacing-xs);
  border-radius: var(--border-radius-sm);
  font-size: var(--font-size-xs);
  font-weight: 600;
  text-transform: uppercase;
}

.priorityBadge.critical {
  background: var(--color-error-subtle);
  color: var(--color-error);
}

.priorityBadge.high {
  background: var(--color-warning-subtle);
  color: var(--color-warning);
}

.priorityBadge.medium {
  background: var(--color-info-subtle);
  color: var(--color-info);
}

.priorityBadge.low {
  background: var(--color-success-subtle);
  color: var(--color-success);
}

/* Avatares dos usuários */
.userAvatars {
  display: flex;
  align-items: center;
  gap: -8px;
}

.userAvatar {
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--surface);
  background: var(--color-primary);
  color: var(--color-primary-contrast);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

.avatarSmall {
  width: 24px;
  height: 24px;
  font-size: var(--font-size-xs);
}

.avatarMedium {
  width: 32px;
  height: 32px;
  font-size: var(--font-size-sm);
}

.avatarImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.avatarInitials {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.userAvatars .userAvatar:not(:first-child) {
  margin-left: -8px;
}

.moreUsers {
  background: var(--surface-subtle);
  color: var(--text-secondary);
  border: 2px solid var(--surface);
  border-radius: 50%;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-xs);
  font-weight: 600;
  margin-left: -8px;
}

.expandIcon {
  color: var(--text-tertiary);
}

/* Conteúdo do conflito */
.conflictContent {
  border-top: 1px solid var(--border-subtle);
  padding: var(--spacing-lg);
  background: var(--surface-subtle);
}

.conflictDescription {
  margin-bottom: var(--spacing-lg);
  padding: var(--spacing-md);
  background: var(--surface);
  border: 1px solid var(--border-subtle);
  border-radius: var(--border-radius-md);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

/* Comparação de valores */
.valueComparison {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.valuesGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-md);
}

.valueOption {
  border: 2px solid var(--border-default);
  border-radius: var(--border-radius-lg);
  background: var(--surface);
  cursor: pointer;
  transition: all 0.2s ease;
  overflow: hidden;
}

.valueOption:hover {
  border-color: var(--color-primary-alpha-50);
  background: var(--surface-elevated);
}

.valueOption.selected {
  border-color: var(--color-primary);
  background: var(--color-primary-subtle);
}

.valueHeader {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--border-subtle);
  background: var(--surface-subtle);
  position: relative;
}

.userInfo {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.userName {
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--text-primary);
}

.userTime {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
}

.selectedIcon {
  color: var(--color-success);
}

.valuePreview {
  padding: var(--spacing-md);
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  background: var(--surface);
  max-height: 100px;
  overflow-y: auto;
}

/* Opção de merge */
.mergeOption {
  border: 2px solid var(--border-default);
  border-radius: var(--border-radius-lg);
  background: var(--surface);
  cursor: pointer;
  transition: all 0.2s ease;
}

.mergeOption:hover {
  border-color: var(--color-info-alpha-50);
  background: var(--surface-elevated);
}

.mergeOption.selected {
  border-color: var(--color-info);
  background: var(--color-info-subtle);
}

.mergeHeader {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--border-subtle);
  background: var(--color-info-subtle);
  color: var(--color-info);
  font-weight: 600;
}

.mergePreview {
  padding: var(--spacing-md);
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  background: var(--surface);
  max-height: 100px;
  overflow-y: auto;
}

/* Valor customizado */
.customValueOption {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.customLabel {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--text-primary);
  cursor: pointer;
}

.customInput {
  width: 100%;
  min-height: 80px;
  padding: var(--spacing-sm);
  border: 1px solid var(--border-default);
  border-radius: var(--border-radius-md);
  background: var(--surface);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  resize: vertical;
  transition: border-color 0.2s ease;
}

.customInput:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-alpha-20);
}

/* Ações de resolução */
.resolutionActions {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.actionButtons {
  display: flex;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.resolveButton,
.cancelButton,
.infoButton {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm) var(--spacing-md);
  border: none;
  border-radius: var(--border-radius-md);
  font-size: var(--font-size-sm);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.resolveButton {
  background: var(--color-success);
  color: var(--color-success-contrast);
}

.resolveButton:hover {
  background: var(--color-success-hover);
}

.resolveButton:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.cancelButton {
  background: var(--color-error);
  color: var(--color-error-contrast);
}

.cancelButton:hover {
  background: var(--color-error-hover);
}

.infoButton {
  background: var(--surface-subtle);
  color: var(--text-secondary);
  border: 1px solid var(--border-default);
}

.infoButton:hover {
  background: var(--surface);
  color: var(--text-primary);
  border-color: var(--border-hover);
}

/* Seção de comentários */
.commentsSection {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.commentsInput {
  width: 100%;
  min-height: 60px;
  padding: var(--spacing-sm);
  border: 1px solid var(--border-default);
  border-radius: var(--border-radius-md);
  background: var(--surface);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  resize: vertical;
  transition: border-color 0.2s ease;
}

.commentsInput:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-alpha-20);
}

.commentsInput::placeholder {
  color: var(--text-tertiary);
}

/* Estado vazio */
.emptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-xl);
  text-align: center;
  color: var(--text-secondary);
}

.emptyState svg {
  color: var(--color-success);
  margin-bottom: var(--spacing-md);
}

.emptyState h3 {
  margin-bottom: var(--spacing-sm);
  color: var(--text-primary);
}

/* Painel compacto */
.compactPanel {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm);
  background: var(--surface-elevated);
  border: 1px solid var(--border-subtle);
  border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-sm);
  max-width: 200px;
}

.compactHeader {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--color-warning);
}

.compactConflict {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: var(--font-size-xs);
  color: var(--text-secondary);
}

.moreConflicts {
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
  text-align: center;
  font-style: italic;
}

/* Histórico */
.historySection {
  border-top: 1px solid var(--border-subtle);
  padding: var(--spacing-lg);
  background: var(--surface-subtle);
}

.historyTitle {
  margin-bottom: var(--spacing-md);
  font-size: var(--font-size-md);
  font-weight: 600;
  color: var(--text-primary);
}

.historyList {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.historyItem {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xs);
  border-radius: var(--border-radius-sm);
  transition: background-color 0.2s ease;
}

.historyItem:hover {
  background: var(--surface);
}

.historyIcon {
  flex-shrink: 0;
}

.resolvedIcon {
  color: var(--color-success);
}

.cancelledIcon {
  color: var(--color-error);
}

.historyDetails {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.historyItem .historyTitle {
  font-size: var(--font-size-sm);
  color: var(--text-primary);
  margin: 0;
}

.historyTime {
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
}

/* Responsividade */
@media (max-width: 768px) {
  .valuesGrid {
    grid-template-columns: 1fr;
  }

  .conflictHeader {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-sm);
  }

  .conflictStatus {
    width: 100%;
    justify-content: space-between;
  }

  .actionButtons {
    flex-direction: column;
  }

  .resolveButton,
  .cancelButton,
  .infoButton {
    width: 100%;
    justify-content: center;
  }
}

/* Modo escuro */
@media (prefers-color-scheme: dark) {
  .valuePreview,
  .mergePreview {
    background: var(--surface-subtle);
  }
}

/* Alto contraste */
@media (prefers-contrast: high) {
  .conflictCard {
    border-width: 2px;
  }

  .valueOption,
  .mergeOption {
    border-width: 3px;
  }
}

/* Redução de movimento */
@media (prefers-reduced-motion: reduce) {
  .conflictCard,
  .valueOption,
  .mergeOption,
  .resolveButton,
  .cancelButton,
  .infoButton {
    transition: none;
  }
}